<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:TorrentFree.ViewModels"
             x:Class="TorrentFree.SettingsPage"
             x:DataType="viewmodels:SettingsViewModel"
             BackgroundColor="{StaticResource PageBackgroundColor}"
             Title="Settings">

    <ScrollView>
        <VerticalStackLayout Padding="16"
                             Spacing="16">
            <Label Text="âš™ï¸ Settings"
                   FontSize="22"
                   FontAttributes="Bold"/>

            <Label Text="Changes are saved automatically."
                   FontSize="12"
                   TextColor="Gray"/>

            <Frame Padding="16"
                   CornerRadius="12"
                   BorderColor="Transparent"
                   BackgroundColor="{AppThemeBinding Light={StaticResource CardBackground}, Dark={StaticResource CardBackgroundDark}}"
                   HasShadow="True">
                <Grid RowDefinitions="Auto,Auto,Auto"
                      ColumnDefinitions="*,*"
                      ColumnSpacing="12"
                      RowSpacing="8">
                    <Label Grid.Row="0"
                           Grid.ColumnSpan="2"
                           Text="Speed Limits"
                           FontSize="14"
                           FontAttributes="Bold"/>

                    <VerticalStackLayout Grid.Row="1"
                                         Grid.Column="0"
                                         Spacing="4">
                        <Label Text="â¬‡ï¸ Download KB/s"
                               FontSize="11"
                               TextColor="Gray"/>
                        <Entry Text="{Binding GlobalDownloadLimitKbps}"
                               Keyboard="Numeric"
                               Placeholder="0 = unlimited"
                               TextChanged="OnNumericTextChanged"/>
                    </VerticalStackLayout>

                    <VerticalStackLayout Grid.Row="1"
                                         Grid.Column="1"
                                         Spacing="4">
                        <Label Text="â¬†ï¸ Upload KB/s"
                               FontSize="11"
                               TextColor="Gray"/>
                        <Entry Text="{Binding GlobalUploadLimitKbps}"
                               Keyboard="Numeric"
                               Placeholder="0 = unlimited"
                               TextChanged="OnNumericTextChanged"/>
                    </VerticalStackLayout>
                </Grid>
            </Frame>

            <Frame Padding="16"
                   CornerRadius="12"
                   BorderColor="Transparent"
                   BackgroundColor="{AppThemeBinding Light={StaticResource CardBackground}, Dark={StaticResource CardBackgroundDark}}"
                   HasShadow="True"
                   IsVisible="{Binding IsFileAssociationSupported}">
                <Grid RowDefinitions="Auto,Auto"
                      ColumnDefinitions="*,Auto"
                      ColumnSpacing="12"
                      RowSpacing="8">
                    <Label Grid.Row="0"
                           Grid.ColumnSpan="2"
                           Text="File Associations"
                           FontSize="14"
                           FontAttributes="Bold"/>
                    <Label Grid.Row="1"
                           Grid.Column="0"
                           Text="Associate .torrent files"
                           FontSize="12"
                           TextColor="Gray"/>
                    <Switch Grid.Row="1"
                            Grid.Column="1"
                            IsToggled="{Binding IsTorrentAssociated}"/>
                </Grid>
            </Frame>

            <Frame Padding="16"
                   CornerRadius="12"
                   BorderColor="Transparent"
                   BackgroundColor="{AppThemeBinding Light={StaticResource CardBackground}, Dark={StaticResource CardBackgroundDark}}"
                   HasShadow="True">
                <Grid RowDefinitions="Auto,Auto"
                      ColumnDefinitions="*,*"
                      ColumnSpacing="12"
                      RowSpacing="8">
                    <Label Grid.Row="0"
                           Grid.ColumnSpan="2"
                           Text="Queue Limits"
                           FontSize="14"
                           FontAttributes="Bold"/>

                    <VerticalStackLayout Grid.Row="1"
                                         Grid.Column="0"
                                         Spacing="4">
                        <Label Text="â¬‡ï¸ Max Active Downloads"
                               FontSize="11"
                               TextColor="Gray"/>
                        <Entry Text="{Binding MaxActiveDownloads}"
                               Keyboard="Numeric"
                               Placeholder="0 = unlimited"
                               TextChanged="OnNumericTextChanged"/>
                    </VerticalStackLayout>

                    <VerticalStackLayout Grid.Row="1"
                                         Grid.Column="1"
                                         Spacing="4">
                        <Label Text="ðŸŒ± Max Active Seeds"
                               FontSize="11"
                               TextColor="Gray"/>
                        <Entry Text="{Binding MaxActiveSeeds}"
                               Keyboard="Numeric"
                               Placeholder="0 = unlimited"
                               TextChanged="OnNumericTextChanged"/>
                    </VerticalStackLayout>
                </Grid>
            </Frame>

            <Frame Padding="16"
                   CornerRadius="12"
                   BorderColor="Transparent"
                   BackgroundColor="{AppThemeBinding Light={StaticResource CardBackground}, Dark={StaticResource CardBackgroundDark}}"
                   HasShadow="True">
                <Grid RowDefinitions="Auto,Auto"
                      ColumnDefinitions="*,*"
                      ColumnSpacing="12"
                      RowSpacing="8">
                    <Label Grid.Row="0"
                           Grid.ColumnSpan="2"
                           Text="Seeding Limits"
                           FontSize="14"
                           FontAttributes="Bold"/>

                    <VerticalStackLayout Grid.Row="1"
                                         Grid.Column="0"
                                         Spacing="4">
                        <Label Text="ðŸ“Š Max Seed Ratio"
                               FontSize="11"
                               TextColor="Gray"/>
                        <Entry Text="{Binding GlobalMaxSeedRatio}"
                               Keyboard="Numeric"
                               Placeholder="0 = unlimited"
                               TextChanged="OnDecimalTextChanged"/>
                    </VerticalStackLayout>

                    <VerticalStackLayout Grid.Row="1"
                                         Grid.Column="1"
                                         Spacing="4">
                        <Label Text="â±ï¸ Max Seed Minutes"
                               FontSize="11"
                               TextColor="Gray"/>
                        <Entry Text="{Binding GlobalMaxSeedMinutes}"
                               Keyboard="Numeric"
                               Placeholder="0 = unlimited"
                               TextChanged="OnNumericTextChanged"/>
                    </VerticalStackLayout>
                </Grid>
            </Frame>

            <Label Text="{Binding ValidationMessage}"
                   TextColor="{StaticResource StatusFailed}"
                   IsVisible="{Binding ValidationMessage, Converter={StaticResource StringNotEmptyConverter}}"
                   FontSize="12"/>
        </VerticalStackLayout>
    </ScrollView>

</ContentPage>